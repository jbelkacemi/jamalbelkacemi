<!doctype html><html lang=es><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Integrando Una Báscula Bluetooth en Home Assistant: Mi Experiencia Y Resultados - Jamal Belkacemi</title><meta name=Description content="Integrando Una Báscula Bluetooth en Home Assistant: Mi Experiencia Y Resultados"><meta property="og:url" content="https://jamalbelkacemi.es/domotica/integrando-una-b%C3%A1scula-bluetooth-en-home-assistant-mi-experiencia-y-resultados/">
<meta property="og:site_name" content="Jamal Belkacemi"><meta property="og:title" content="Integrando Una Báscula Bluetooth en Home Assistant: Mi Experiencia Y Resultados"><meta property="og:description" content="Integrando Una Báscula Bluetooth en Home Assistant: Mi Experiencia Y Resultados"><meta property="og:locale" content="es"><meta property="og:type" content="article"><meta property="article:section" content="domotica"><meta property="article:published_time" content="2025-06-23T17:29:57+02:00"><meta property="article:modified_time" content="2025-06-23T17:29:57+02:00"><meta property="article:tag" content="Home Assistant"><meta property="article:tag" content="ESP32"><meta property="article:tag" content="Bluetooth"><meta property="article:tag" content="Swisshome"><meta property="og:image" content="https://jamalbelkacemi.es/domotica/integrando-una-b%C3%A1scula-bluetooth-en-home-assistant-mi-experiencia-y-resultados/feature.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jamalbelkacemi.es/domotica/integrando-una-b%C3%A1scula-bluetooth-en-home-assistant-mi-experiencia-y-resultados/feature.webp"><meta name=twitter:title content="Integrando Una Báscula Bluetooth en Home Assistant: Mi Experiencia Y Resultados"><meta name=twitter:description content="Integrando Una Báscula Bluetooth en Home Assistant: Mi Experiencia Y Resultados"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=referrer content="no-referrer"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://jamalbelkacemi.es/domotica/integrando-una-b%C3%A1scula-bluetooth-en-home-assistant-mi-experiencia-y-resultados/><link rel=stylesheet href=/css/style.min.d468bda1695ff8f8af5fbac04ead4e0736dc33f1ff644953ad5e50e702062921d4faee119de295f1824ae3105e31f977.css integrity=sha384-1Gi9oWlf+PivX7rATq1OBzbcM/H/ZElTrV5Q5wIGKSHU+u4RneKV8YJK4xBeMfl3><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Integrando Una Báscula Bluetooth en Home Assistant: Mi Experiencia Y Resultados","inLanguage":"es","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/jamalbelkacemi.es\/domotica\/integrando-una-b%C3%A1scula-bluetooth-en-home-assistant-mi-experiencia-y-resultados\/"},"image":[{"@type":"ImageObject","url":"https:\/\/jamalbelkacemi.es\/domotica\/integrando-una-b%C3%A1scula-bluetooth-en-home-assistant-mi-experiencia-y-resultados\/feature.webp","width":2500,"height":2500}],"genre":"domotica","keywords":"Home Assistant, ESP32, Bluetooth, Swisshome","wordcount":408,"url":"https:\/\/jamalbelkacemi.es\/domotica\/integrando-una-b%C3%A1scula-bluetooth-en-home-assistant-mi-experiencia-y-resultados\/","datePublished":"2025-06-23T17:29:57+02:00","dateModified":"2025-06-23T17:29:57+02:00","license":"jamalbelkacemi","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Jamal"},"description":"Integrando Una Báscula Bluetooth en Home Assistant: Mi Experiencia Y Resultados"}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Jamal Belkacemi">Jamal Belkacemi</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/domotica/>Domotica </a><a class=menu-item href=/windows/>Windows </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categorías </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Busca títulos o contenido..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Buscar><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Limpiar><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Cambia el tema"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Jamal Belkacemi">Jamal Belkacemi</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Busca títulos o contenido..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Buscar><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Limpiar><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancelar</a></div><a class=menu-item href=/domotica/ title>Domotica</a><a class=menu-item href=/windows/ title>Windows</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categorías</a><a href=javascript:void(0); class="menu-item theme-switch" title="Cambia el tema">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class="page single special"><h1 class="single-title animate__animated animate__pulse animate__faster">Integrando Una Báscula Bluetooth en Home Assistant: Mi Experiencia Y Resultados</h1><div class=content id=content><h1 id=integrando-una-báscula-bluetooth-swisshome-con-home-assistant-usando-esp32-y-esphome>Integrando una báscula Bluetooth Swisshome con Home Assistant usando ESP32 y ESPHome</h1><h1 id=hola-a-todos>¡Hola a todos!</h1><p>Quería compartir cómo integré mi <strong>báscula Bluetooth Swisshome</strong> con <strong>Home Assistant</strong> utilizando un <strong>ESP32</strong> y <strong>ESPHome</strong>.<br>Lo mejor de todo es que esta báscula económica <strong>no necesita ninguna aplicación adicional</strong>: basta con interceptar las emisiones Bluetooth que lanza, y enviarlas a Home Assistant.</p><hr><h1 id=qué-hace-esta-báscula>¿Qué hace esta báscula?</h1><p>Esta báscula transmite paquetes de datos por Bluetooth, que incluyen:</p><ul><li>El <strong>peso corporal</strong></li><li>La <strong>impedancia corporal</strong></li></ul><p>Cada uno de estos datos se identifica por un <strong>tipo de paquete</strong> y necesita una operación XOR para decodificarse correctamente.</p><hr><h1 id=pasos-clave-del-proyecto>Pasos clave del proyecto</h1><h3 id=decodificación-de-los-datos>Decodificación de los datos</h3><p>La báscula emite dos tipos de paquetes:</p><ul><li><code>0xAD</code> → para el peso corporal</li><li><code>0xA6</code> → para la impedancia</li></ul><p>Ambos necesitan aplicar una operación <strong>XOR</strong> con una clave derivada del <strong>Company ID (<code>0xA0AC</code>)</strong> para extraer los valores.</p><hr><h3 id=configurando-el-esp32-con-esphome>Configurando el ESP32 con ESPHome</h3><p>Se usa <strong>ESPHome</strong> para configurar el ESP32, conectarlo a la red y escanear dispositivos Bluetooth cercanos.</p><p>A continuación te comparto un ejemplo del código que utilicé:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-yaml"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copiar al portapapeles"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>sensor</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>platform</span><span class=p>:</span><span class=w> </span><span class=l>template</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Peso Báscula&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>weight_sensor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>unit_of_measurement</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;kg&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>accuracy_decimals</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>icon</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;mdi:weight-kilogram&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>platform</span><span class=p>:</span><span class=w> </span><span class=l>template</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Impedancia (Z)&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>body_impedancia_sensor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>unit_of_measurement</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Ω&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>accuracy_decimals</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>icon</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;mdi:scale-bathroom&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>esp32_ble_tracker</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>scan_parameters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>1100ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>window</span><span class=p>:</span><span class=w> </span><span class=l>1100ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>active</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>on_ble_advertise</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>mac_address</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>XX:XX:XX:XX:XX:XX </span><span class=w> </span><span class=c># MAC address de tu báscula</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>then</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>lambda</span><span class=p>:</span><span class=w> </span><span class=p>|-</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            const uint16_t company_id = 0xA0AC;
</span></span></span><span class=line><span class=cl><span class=sd>            int xor_key = company_id &gt;&gt; 8;
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            for (auto data : x.get_manufacturer_datas()) {
</span></span></span><span class=line><span class=cl><span class=sd>              if (data.data.size() &gt;= 12) {
</span></span></span><span class=line><span class=cl><span class=sd>                std::vector&lt;uint8_t&gt; buf(6);
</span></span></span><span class=line><span class=cl><span class=sd>                for (int i = 0; i &lt; 6; i++) {
</span></span></span><span class=line><span class=cl><span class=sd>                  buf[i] = data.data[i + 6] ^ xor_key;
</span></span></span><span class=line><span class=cl><span class=sd>                }
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>                int chk = 0;
</span></span></span><span class=line><span class=cl><span class=sd>                for (int i = 0; i &lt; 5; i++) {
</span></span></span><span class=line><span class=cl><span class=sd>                  chk += buf[i];
</span></span></span><span class=line><span class=cl><span class=sd>                }
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>                if ((chk &amp; 0x1F) != (buf[5] &amp; 0x1F)) {
</span></span></span><span class=line><span class=cl><span class=sd>                  ESP_LOGD(&#34;ble_adv&#34;, &#34;Checksum error&#34;);
</span></span></span><span class=line><span class=cl><span class=sd>                  return;
</span></span></span><span class=line><span class=cl><span class=sd>                }
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>                uint8_t packet_type = buf[4];
</span></span></span><span class=line><span class=cl><span class=sd>                if (packet_type == 0xAD) {
</span></span></span><span class=line><span class=cl><span class=sd>                  int32_t value = (buf[3] | (buf[2] &lt;&lt; 8) | (buf[1] &lt;&lt; 16) | (buf[0] &lt;&lt; 24));
</span></span></span><span class=line><span class=cl><span class=sd>                  uint8_t state = (value &gt;&gt; 31) &amp; 0x1;
</span></span></span><span class=line><span class=cl><span class=sd>                  int grams = value &amp; 0x3FFFF;
</span></span></span><span class=line><span class=cl><span class=sd>                  float weight_kg = grams / 1000.0;
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>                  ESP_LOGD(&#34;ble_adv&#34;, &#34;Peso: %.2f kg, state: %d&#34;, weight_kg, state);
</span></span></span><span class=line><span class=cl><span class=sd>                  if (state != 0) {
</span></span></span><span class=line><span class=cl><span class=sd>                    ESP_LOGD(&#34;ble_adv&#34;, &#34;Medición completada.&#34;);
</span></span></span><span class=line><span class=cl><span class=sd>                    id(weight_sensor).publish_state(weight_kg);
</span></span></span><span class=line><span class=cl><span class=sd>                  }
</span></span></span><span class=line><span class=cl><span class=sd>                } else if (packet_type == 0xA6) {
</span></span></span><span class=line><span class=cl><span class=sd>                  int fat_raw = ((buf[1]) &lt;&lt; 8) | buf[0];
</span></span></span><span class=line><span class=cl><span class=sd>                  ESP_LOGD(&#34;ble_adv&#34;, &#34;Impedancia: %d&#34;, fat_raw);
</span></span></span><span class=line><span class=cl><span class=sd>                  float impedancia = fat_raw / 10.0;
</span></span></span><span class=line><span class=cl><span class=sd>                  ESP_LOGD(&#34;ble_adv&#34;, &#34;Impedancia (Z): %.2f Ω&#34;, impedancia);
</span></span></span><span class=line><span class=cl><span class=sd>                  id(body_impedancia_sensor).publish_state(impedancia);
</span></span></span><span class=line><span class=cl><span class=sd>                } else {
</span></span></span><span class=line><span class=cl><span class=sd>                  ESP_LOGD(&#34;ble_adv&#34;, &#34;Tipo de paquete no admitido: 0x%02X&#34;, packet_type);
</span></span></span><span class=line><span class=cl><span class=sd>                }
</span></span></span><span class=line><span class=cl><span class=sd>              }
</span></span></span><span class=line><span class=cl><span class=sd>            }</span></span></span></code></pre></div></div></div><div id=comments><div class=comment-header><p>💬 Anímate a dejar tu duda, sugerencia o comentario relacionado con este artículo. ¡Te leo!</p></div><div id=giscus class=comment></div></div></div></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Jamal Belkacemi</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Volver arriba"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i></a></div><div id=fixed-buttons-hidden><a href=# id=view-comments class=fixed-button title="Ver comentarios"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css><script src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script src=/lib/lunr/lunr.stemmer.support.min.dd91542c33b6fde8b7d59f4cfeed0fbb6dcee4b60acb7ef3fc57ccf73abdf34ef6802977346b55f7ef71c8af0f4de722.js integrity=sha384-3ZFULDO2/ei31Z9M/u0Pu23O5LYKy37z/FfM9zq98072gCl3NGtV9+9xyK8PTeci></script><script src=/lib/lunr/lunr.es.min.22c69ccb952b6f5c1a4366150e76ff0329712907fd2c6fa30f287ba427c58d74045f98777dc3da5b22f0f1778de3e9c3.js integrity=sha384-Isacy5Urb1waQ2YVDnb/AylxKQf9LG+jDyh7pCfFjXQEX5h3fcPaWyLw8XeN4+nD></script><script src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.2/sharer.min.js></script><script src=https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js></script><script>window.config={comment:{giscus:{category:"General",categoryId:"DIC_kwDOO_6K684CsUzL",darkTheme:"dark",emitMetadata:"0",inputPosition:"bottom",lang:"es",lazyLoading:!1,lightTheme:"light",mapping:"title",reactionsEnabled:"1",repo:"jbelkacemi/jamalbelkacemi",repoId:"R_kgDOO_6K6w"}},cookieconsent:{content:{dismiss:"De acuerdo",link:"Aprende más",message:"Este sitio web utiliza Cookies para mejorar su experiencia."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},lightgallery:!0,search:{highlightTag:"em",lunrLanguageCode:"es",maxResultLength:10,noResultsFound:"No se encontraron resultados",snippetLength:30}}</script><script src=/js/theme.min.8ff300338b68832dff4f8774332b9ac7af8d834d347322ce87cced6a522319828d78e24a9fb254c841c2e10a48f3ad84.js integrity=sha384-j/MAM4togy3/T4d0Myuax6+Ng000cyLOh8ztalIjGYKNeOJKn7JUyEHC4QpI862E></script></body></html>